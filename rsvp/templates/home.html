{% extends "base.html" %} 
{% block title %} Home Page - Wedding {% endblock %}

{% block content %}
<p>This is the home page</p>
<div class="container-fluid">
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="{{ form.name.id_for_label }}">Name on invite</label>
                {{ form.name }}
            </div>
            <div class="form-group">
                <label for="{{ form.name2.id_for_label }}">Name two on invite (if applicable)</label>
                {{ form.name2 }}
            </div>
            <div class="form-group">
                <label for="{{ form.will_attend.id_for_label }}">Are you attending?</label>
                {{ form.will_attend }}
            </div>
            <div class="conditional-field">
                <div class="form-group">
                    <label for="{{ form.both_attending.id_for_label }}">Is person two attending (if applicable)?</label>
                    {{ form.both_attending }}
                </div>
                <div class="form-group">
                    <label for="{{ form.dietary_requirements.id_for_label }}">Do you have any dietary requirements?</label>
                    {{ form.dietary_requirements }}
                </div>

                <div class="form-group">
                    {{ form.other_dietary_input }}
                </div>

                <div class="form-group">
                    <label for="{{ form.attending_day2.id_for_label }}">Will you be attending day two?</label>
                    {{ form.attending_day2 }}
                </div>
                <div class="form-group">
                    <label for="{{ form.music_requests.id_for_label }}">Is there any music you want to hear on the night?</label>
                    {{ form.music_requests }}
                </div>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
</div>

<script>
// HIDES OTHER QUESTIONS UNTIL YES IS SELECTED
 document.addEventListener('DOMContentLoaded', function() {
    const willAttendFields = document.querySelectorAll('input[name="will_attend"]');
    const conditionalContainers = document.querySelectorAll('.conditional-field');

    function toggleFields() {
        let selectedValue;
        willAttendFields.forEach(field => {
            if (field.checked) {
                selectedValue = field.value;
            }
        });

        if (selectedValue === 'True') {  // 'True' is the value for 'Yes'
            conditionalContainers.forEach(container => {
                container.style.display = 'block';  // Show the container
                // Enable all input, select, and textarea elements inside the container
                container.querySelectorAll('input, select, textarea').forEach(input => input.disabled = false);
            });
        } else {
            conditionalContainers.forEach(container => {
                container.style.display = 'none';  // Hide the container
                // Disable all input, select, and textarea elements inside the container
                container.querySelectorAll('input, select, textarea').forEach(input => input.disabled = true);
            });
        }
    }

    willAttendFields.forEach(field => field.addEventListener('change', toggleFields));
    toggleFields();  // Call once to set initial state
});
</script>

{% endblock %}