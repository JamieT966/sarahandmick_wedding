{% extends "base.html" %} 
{% block title %} Home Page - Wedding {% endblock %}
{% load crispy_forms_tags %}
{% block content %}
<div class="hero-image intro-section p-3 container-fluid d-flex justify-content-center align-items-center">

</div>
<div class="container-fluid">
    {% load crispy_forms_tags %}

    <form method="post" class="form-container">
        {% csrf_token %}
        
        <div class="form-group">
            {{ form.name|as_crispy_field }}
        </div>
        <div class="form-group">
            {{ form.name2|as_crispy_field }}
        </div>
        <div class="form-group">
            {{ form.will_attend|as_crispy_field }}
        </div>
        <div class="conditional-field">
            <div class="form-group">
                {{ form.both_attending|as_crispy_field }}
            </div>
            <div class="form-group">
                {{ form.dietary_requirements|as_crispy_field }}
            </div>
            <div class="form-group">
                {{ form.other_dietary_input|as_crispy_field }}
            </div>
            <div class="form-group">
                {{ form.attending_day2|as_crispy_field }}
            </div>
            <div class="form-group">
                {{ form.music_requests|as_crispy_field }}
            </div>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    
</div>

<script>
// HIDES OTHER QUESTIONS UNTIL YES IS SELECTED
 document.addEventListener('DOMContentLoaded', function() {
    const willAttendFields = document.querySelectorAll('input[name="will_attend"]');
    const conditionalContainers = document.querySelectorAll('.conditional-field');

    function toggleFields() {
        let selectedValue;
        willAttendFields.forEach(field => {
            if (field.checked) {
                selectedValue = field.value;
            }
        });

        if (selectedValue === 'True') {  // 'True' is the value for 'Yes'
            conditionalContainers.forEach(container => {
                container.style.display = 'block';  // Show the container
                // Enable all input, select, and textarea elements inside the container
                container.querySelectorAll('input, select, textarea').forEach(input => input.disabled = false);
            });
        } else {
            conditionalContainers.forEach(container => {
                container.style.display = 'none';  // Hide the container
                // Disable all input, select, and textarea elements inside the container
                container.querySelectorAll('input, select, textarea').forEach(input => input.disabled = true);
            });
        }
    }

    willAttendFields.forEach(field => field.addEventListener('change', toggleFields));
    toggleFields();  // Call once to set initial state
});
</script>

{% endblock %}